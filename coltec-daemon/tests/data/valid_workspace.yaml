name: env-test
version: 1.0.0
metadata:
  org: test-org
  project: test-proj
  environment: env-test
  description: Coltec workspace for test-proj
  tags:
  - python
  - test-org
  - test-proj
devcontainer:
  image:
    name: ghcr.io/psu3d0/coltec-codespace:1.0-base-dind-net
  user: vscode
  workspace_folder: /workspace
  workspace_mount: source=${localWorkspaceFolder},target=/workspace,type=bind
  run_args:
  - --cap-add=SYS_PTRACE
  - --security-opt=seccomp=unconfined
  mounts:
  - source: env-test-home
    target: /home/vscode
    type: volume
  - source: env-test-tool-cache
    target: /home/vscode/.cache
    type: volume
  - source: env-test-venv
    target: /workspace/codebase/.venv
    type: volume
  lifecycle:
    post_create:
    - ./.devcontainer/scripts/post-create.sh
    post_start:
    - ./.devcontainer/scripts/post-start.sh
  customizations:
    extensions:
      recommended:
      - ms-azuretools.vscode-docker
      - ms-vscode.makefile-tools
      - ms-vscode.remote-explorer
      - fill-labs.dependi
      - ms-python.python
    settings:
      values:
        terminal.integrated.defaultProfile.linux: tmux
        terminal.integrated.profiles.linux:
          zsh:
            path: /usr/bin/zsh
          resumable-tmux:
            path: /usr/bin/tmux
            args:
            - new-session
            - -A
            - -s
            - devcontainer
        terminal.integrated.cwd: /workspace
        terminal.integrated.localEchoEnabled: 'on'
        files.trimTrailingWhitespace: true
        editor.formatOnSave: true
        python.analysis.typeCheckingMode: strict
        rust-analyzer.cargo.allFeatures: true
        rust-analyzer.check.command: clippy
        git.openRepositoryInParentFolders: always
persistence:
  enabled: true
  mode: replicated
  scope: project
  mounts: []
  default_remote: r2coltec
  remotes:
    r2coltec:
      type: s3
      bucket: coltec-workspaces
      options:
        provider: Cloudflare
        access_key_id: ${S3_ACCESS_KEY_ID}
        secret_access_key: ${S3_SECRET_ACCESS_KEY}
        endpoint: ${S3_ENDPOINT}
        region: auto
  multi_scope_volumes:
    global_refs: []
    project_refs: []
    environment:
    - name: agent-context
      remote_path: workspaces/{org}/{project}/{env}/agent-context
      mount_path: /workspace/agent-context
      sync: bidirectional
      interval: 60
      priority: 1
      exclude:
      - .git/**
      - __pycache__/**
      - '*.pyc'
      - node_modules/**
      - .venv/**
      read_only: false
    - name: scratch
      remote_path: workspaces/{org}/{project}/{env}/scratch
      mount_path: /workspace/scratch
      sync: push-only
      interval: 300
      priority: 2
      exclude:
      - '*.tmp'
      - '*.log'
      read_only: false
generated_at: '2025-11-27T22:11:48Z'
